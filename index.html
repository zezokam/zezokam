<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>قائمة المهام</title>
  <style>
    /* styles from previous code */
  </style>
</head>
<body>
  <h1>قائمة المهام</h1>
  <div class="container">
    <ul id="task-list"></ul>
    <button onclick="addTask()">إضافة مهمة</button>
    <button onclick="editTitle()">تعديل العنوان</button>
    <button onclick="clearList()">مسح القائمة</button>
    <button onclick="createPDF()">تصدير كملف PDF</button>
    <button onclick="newList()">قائمة جديدة</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
  <script>
    let taskList = document.getElementById("task-list");
    let title = "قائمة المهام";
    
    // check if there are saved tasks in local storage
    if (localStorage.getItem("tasks")) {
      taskList.innerHTML = localStorage.getItem("tasks");
    } else {
      addTask();
    }
    
    function addTask() {
      let count = taskList.getElementsByTagName("li").length + 1;
      let input = document.createElement("input");
      input.type = "text";
      input.placeholder = "مهمة رقم " + count;
      let li = document.createElement("li");
      li.appendChild(document.createTextNode(count));
      li.appendChild(input);
      taskList.appendChild(li);
      
      // save tasks to local storage
      localStorage.setItem("tasks", taskList.innerHTML);
    }
    
    function editTitle() {
      title = prompt("العنوان الجديد:", title);
      document.getElementsByTagName("title")[0].innerHTML = title;
      document.getElementsByTagName("h1")[0].innerHTML = title;
    }
    
    function clearList() {
      taskList.innerHTML = "";
      
      // remove tasks from local storage
      localStorage.removeItem("tasks");
    }
    
    function createPDF() {
      // create a new jsPDF instance
      let doc = new jsPDF();
      
      // add the task list to the PDF document
      let count = 1;
      taskList.getElementsByTagName("li").forEach(function(item) {
        doc.text(`${count}. ${item.querySelector("input").value}`, 10, count*10);
        count++;
      });
      
      // save the PDF file
      doc.save("task-list.pdf");
    }
    
    function newList() {
      taskList.innerHTML = "";
      addTask();
      title = "قائمة المهام";
      document.getElementsByTagName("title")[0].innerHTML = title;
      document.getElementsByTagName("h1")[0].innerHTML = title;
      
      // remove tasks from local storage
      localStorage.removeItem("tasks");
    }
  </script>
</body>
</html>
